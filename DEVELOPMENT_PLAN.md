# 🔖 Paste Library - 开发计划

## 项目概述

一个现代化的剪贴板管理工具，实时监听系统剪贴板，保存历史记录，支持快速查询和管理。类似 Windows 11 原生剪贴板，通过快捷键快速唤醒。

**技术栈**: Tauri v2 + Vue 3 + TypeScript + tauri-plugin-clipboard-x

---

## 核心需求

#### 2026年2月5日
- 先支持文本和html的数据

---

## 开发阶段

### 阶段 1️⃣ : 基础设施搭建 ✅ COMPLETE
- [x] **1.1** 安装 `tauri-plugin-clipboard-x` 依赖
  - ✅ Cargo.toml 中添加 clipboard-x 插件
  - ✅ 前端安装 `tauri-plugin-clipboard-x-api`
  - ✅ 配置 Tauri 权限 (`capabilities/default.json`)
  
- [x] **1.2** Rust 后端初始化
  - ✅ 在 `src-tauri/src/lib.rs` 中注册 clipboard-x 插件
  - ✅ 创建剪贴板监听模块 (`src/clipboard.rs`)
  - ✅ 设计数据模型 (`src/models.rs`)
  - ✅ 添加 SQLite 依赖 (`rusqlite`, `chrono`, `sha2`, `tokio`)
  
- [x] **1.3** 前端项目结构搭建
  - ✅ 创建组件文件夹结构 (`src/components/`)
  - ✅ 创建 composables (`useClipboard.ts`, `useSettings.ts`)
  - ✅ 创建类型定义文件 (`src/types/index.ts`)
  - ✅ 全局样式配置 (`App.vue`)
  - ✅ 配置 Vite 路径别名

- [x] **1.4** 数据存储方案确定
  - ✅ 使用 SQLite (rusqlite with bundled)
  - ✅ 历史记录最大条数：默认 5000，支持自定义
  - ✅ 支持跨会话持久化
  - ✅ 支持按条数/日期清理
  - ❓ 图片/文件暂时跳过（等待跨设备同步设计）

---

### 阶段 2️⃣ : 剪贴板监听 & 数据管理 ✅ COMPLETE
- [x] **2.1** 剪贴板实时监听
  - ✅ 启动 clipboard 监听 (`startListening`)
  - ✅ 捕获剪贴板变化事件 (`onClipboardChange`)
  - ✅ 识别内容类型 (文本/HTML)
  
- [x] **2.2** 数据模型 & 存储逻辑
  - ✅ 设计 ClipboardItem 数据结构
  - ✅ 实现历史记录的 CRUD 操作 (Rust backend)
  - ✅ 去重逻辑 (SHA256 内容哈希)
  - ✅ 敏感内容过滤 — 不需要

- [x] **2.3** Rust 后端 API
  - ✅ `add_clipboard_item()` - 添加剪贴板记录
  - ✅ `get_clipboard_history()` - 获取历史记录
  - ✅ `search_clipboard_history()` - 搜索历史
  - ✅ `delete_clipboard_item()` - 删除单条记录
  - ✅ `clear_clipboard_history()` - 清空历史
  - ✅ `get_settings()` / `save_settings()` - 设置管理

---

### 阶段 3️⃣ : 用户界面 (UI) ✅ COMPLETE
- [x] **3.1** 主窗口设计
  - ✅ 列表样式：卡片风格（简约现代）
  - ✅ 每项显示：类型标签、字符数、时间戳、内容预览
  - ✅ 窗口大小：800x600，居中显示
  - ✅ **无标题栏窗口** + 顶部拖动胶囊

- [x] **3.2** 剪贴板历史列表
  - ✅ 卡片式布局，圆角阴影
  - ✅ 标签页导航：全部/文本/图片/文件/收藏
  - ✅ 每条记录：收藏星标、删除按钮
  - ✅ 内容预览：限制3行，HTML去标签
  - ✅ 悬停效果：操作按钮渐显

- [x] **3.3** 交互功能
  - ✅ 单击项目 → 复制到剪贴板
  - ✅ 点击收藏 → 切换收藏状态
  - ✅ 点击删除 → 删除单条记录
  - ✅ 搜索框：底部固定，实时过滤

- [x] **3.4** 窗口控制
  - ✅ 顶部拖动手柄（三个圆点胶囊）
  - ✅ 窗口控制按钮：最小化、关闭
  - ✅ 可调整窗口大小
  - ⏳ 快捷键集成 (Alt+V) — 待实现

---

### 阶段 4️⃣ : 高级功能 ⏳ IN PROGRESS
- [x] **4.1** 搜索 & 过滤
  - ✅ 模糊搜索支持
  - ✅ 按内容类型过滤 (标签页)
  - ⏳ 按时间范围过滤 — 待实现

- [ ] **4.2** 设置面板
  - [ ] 历史记录最大数量设置
  - [ ] 开机自启设置
  - [ ] 快捷键自定义 (Alt+V)
  - [ ] 黑名单应用
  - [ ] 自动清理周期
  - ✅ 只支持亮色主题（已确定）

- [ ] **4.3** 数据导出 & 备份
  - [ ] 导出为 JSON/CSV
  - [ ] 导入历史记录

- [ ] **4.4** 系统托盘集成
  - [ ] 托盘图标
  - [ ] 托盘菜单 (显示窗口/设置/退出)

---

### 阶段 5️⃣ : 测试 & 优化 📋 PLANNED
- [ ] **5.1** 功能测试
  - [ ] 剪贴板监听稳定性
  - [ ] 各类型内容的正确处理
  - [ ] 数据持久化验证
  - [ ] 快捷键响应测试

- [ ] **5.2** 性能优化
  - [ ] 大量历史记录下的列表滚动性能
  - [ ] 内存占用优化
  - [ ] 后端数据库查询优化

- [ ] **5.3** UI/UX 优化
  - ✅ 只支持亮色主题（已确定）
  - [ ] 响应式设计 (不同屏幕分辨率)
  - [ ] 动画和过渡效果

---

### 阶段 6️⃣ : 构建 & 发布 📋 PLANNED
- [ ] **6.1** 打包构建
  - [ ] `pnpm tauri build` for Windows/macOS/Linux
  - [ ] 测试安装程序
  
- [ ] **6.2** 版本管理
  - [ ] 更新版本号
  - [ ] 生成 Changelog

- [ ] **6.3** 发布
  - ❓ 发布渠道 (GitHub Release / 官网)? — 待确认

---

## 当前进度

| 阶段 | 完成度 | 备注 |
|------|--------|------|
| 📦 基础设施 | 100% | ✅ 已完成 |
| 🔔 监听 & 存储 | 100% | ✅ 已完成 |
| 🎨 用户界面 | 95% | ✅ 核心UI完成，快捷键待做 |
| ⚙️ 高级功能 | 20% | ⏳ 搜索完成，设置/托盘待做 |
| ✅ 测试 & 优化 | 0% | 📋 计划中 |
| 📦 构建 & 发布 | 0% | 📋 计划中 |

**总体进度**: ~65%

---

## 待解决问题

### 高优先级
1. ⏳ 全局快捷键 (Alt+V) 唤醒窗口
2. ⏳ 窗口失焦自动隐藏
3. ⏳ 设置面板UI

### 中优先级
4. ❓ 图片/文件支持（等待跨设备同步设计）
5. ⏳ 系统托盘集成
6. ⏳ 数据导出功能

### 低优先级
7. ❓ 发布渠道确定
8. 📋 自动更新机制

---

## 说明

- ❓ **等待确认** 的项目需要你补充具体需求
- ✅ 完成后标记 checkbox
- 如有变更，直接在此文件中更新

**更新记录**:
- 2026-02-05: 完成基础设施、剪贴板监听、卡片式UI、无标题栏窗口
