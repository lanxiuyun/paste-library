# Paste Library - 开发计划

## 项目概述

现代化的剪贴板管理工具，实时监听系统剪贴板，保存历史记录，支持快速查询和管理。

**技术栈**: Tauri v2 + Vue 3 + TypeScript

---

## 开发阶段

### 阶段 1: 基础设施搭建 ✅ COMPLETE
- [x] 安装 tauri-plugin-clipboard-x 依赖
- [x] Rust 后端初始化
- [x] 前端项目结构搭建
- [x] 数据存储方案确定 (SQLite)

### 阶段 2: 剪贴板监听与数据管理 ✅ COMPLETE
- [x] 剪贴板实时监听
- [x] 数据模型设计
- [x] Rust 后端 API

### 阶段 3: 用户界面 ✅ COMPLETE
- [x] 主窗口设计
- [x] 剪贴板历史列表
- [x] 交互功能
- [x] 窗口控制

### 阶段 4: 高级功能 ✅ COMPLETE
- [x] 搜索与过滤
- [x] 设置面板
- [x] 图片/文件类型支持
- [x] 右键上下文菜单
- [x] 收藏功能（已迁移到标签系统）
- [x] 系统托盘集成
- [ ] 数据导出与备份

### 阶段 5: Item 重构与体验优化 ✅ COMPLETE
**Phase 1: Item 基础重构（Foundation）**
- [x] 可变高度 Item 设计（文本最多3行、图片自适应高度）
- [x] 信息展示简化（统计信息移至抽屉）
- [x] 标签系统替代收藏（数据模型 + UI）
- [x] Hover 快捷操作按钮（队列/复制/标签/删除）

**Phase 2: 核心交互增强（Core）**
- [x] 键盘导航系统（↑↓、Enter、数字键1-9、Esc）
- [x] 粘贴队列（购物车模式、批量粘贴）
- [x] 抽屉式编辑器（文本编辑、图片预览）

**Phase 3: 高级功能（Advanced）**
- [ ] 跨应用拖拽
- [ ] 模糊搜索（拼音、首字母、容错、标签搜索）
- [x] 图片文件缩略图显示（使用 convertFileSrc）
- [ ] ItemList虚拟滚动

### 阶段 6: 测试与优化 📋 PLANNED
- [ ] 功能测试
- [ ] 性能优化
- [ ] UI/UX 优化

### 阶段 7: 构建与发布 📋 PLANNED
- [ ] 打包构建
- [ ] 版本管理
- [ ] 发布

---

## 当前进度

| 阶段 | 完成度 |
|------|--------|
| 基础设施 | 100% ✅ |
| 监听与存储 | 100% ✅ |
| 用户界面 | 100% ✅ |
| 高级功能 | 95% ✅ |
| Item 重构与体验优化 | 100% ✅ |
| 测试与优化 | 0% 📋 |
| 构建与发布 | 0% 📋 |

**总体进度**: ~85%

---

## 已完成功能 ✅

### 核心功能 (P0)
- [x] 图片类型监听与显示
- [x] 文件/文件夹类型监听与显示
- [x] 左键/双击/右键交互
- [x] 右键上下文菜单 (ContextMenu组件)
- [x] 收藏/取消收藏功能（即将被标签系统替代）
- [x] 系统托盘集成

### 类型系统
- [x] TypeScript 类型定义 (ClipboardContentType, ClipboardMetadata)
- [x] Rust 模型同步 (models.rs)
- [x] 数据库 schema 迁移 (metadata, file_paths, thumbnail_path, is_favorite)

### 交互功能
- [x] 单击复制到剪贴板
- [x] 双击复制并粘贴
- [x] 右键显示上下文菜单
- [x] 打开文件 (open_file)
- [x] 在文件夹中显示 (show_in_folder)

### 重构计划 (开发中)
详见 [FEATURE_IMPLEMENTATION_CHECKLIST.md](docs/FEATURE_IMPLEMENTATION_CHECKLIST.md)
- 可变高度 Item 设计（文本3行、图片3行）
- 标签系统替代收藏（多标签、颜色、管理面板）
- Hover 快捷按钮（复制/标签/删除）
- 键盘导航（↑↓、Enter、1-9数字键）
- 粘贴队列（购物车批量粘贴）
- 抽屉式编辑器（文本编辑、图片预览）
- 跨应用拖拽
- 模糊搜索（拼音、首字母、容错）
- 搜索时，弹出搜索建议组件（显示所有标签，点击标签后加上关键字，类似 github pr 搜索一样 is:pr is:open ，我们的搜索词变成 tag:工作 tag:灵感 这种格式）
- 图片文件缩略图

---

## 待开发功能清单

### ✅ 已完成功能

**Phase 1: Item 基础重构**
- [x] 可变高度 Item 设计
  - 文本类型最多显示3行
  - 图片类型使用3行高度缩略图
  - 图片文件直接显示缩略图
- [x] 信息展示简化（统计信息移至抽屉）
- [x] 标签系统替代收藏功能
  - 移除 `is_favorite` 字段
  - 新增 `tags: string[]` 支持多标签
  - 标签管理面板
  - 数据迁移
- [x] Hover 快捷操作按钮
  - 队列 / 复制 / 标签 / 删除 四个按钮

**Phase 2: 核心交互增强**
- [x] 键盘导航系统
  - ↑/↓ 导航 item
  - Enter 粘贴选中项
  - 1-9 数字键快速粘贴
  - Esc 关闭窗口
- [x] 粘贴队列（购物车模式）
  - 添加到队列
  - 选择分隔符（换行/无/自定义）
  - 一键批量粘贴
- [x] 抽屉式预览与编辑器
  - 文本：可编辑，显示统计信息
  - 图片：大图预览

**Phase 3: 高级功能**
- [ ] 跨应用拖拽
- [ ] 模糊搜索（拼音、首字母、容错）
- [x] 图片文件缩略图显示（使用 convertFileSrc）
- [ ] ItemList虚拟滚动

### 中优先级 (P1)
- [ ] 数据备份导入导出
- [ ] 存储路径显示
- [ ] 设置面板页面完善

### 低优先级 (P2)
- [ ] 多语言支持
- [ ] 主题切换
- [ ] 缩略图懒加载
- [ ] 性能优化

---

## 更新记录
- 2026-02-05: 完成基础设施、剪贴板监听、卡片式UI
- 2026-02-06: 实现全局快捷键(Alt+V)、窗口失焦自动隐藏、设置面板UI
- 2026-02-06: 完成图片/文件类型支持、右键菜单、收藏功能、交互增强
- 2026-02-06: 完成系统托盘集成（双击打开设置、右键菜单）
- 2026-02-06: 确定 Item 重构方案（可变高度、标签系统、Hover按钮、键盘导航、粘贴队列、抽屉编辑器）
- 2026-02-07: **完成 Phase 5** - Item 重构与体验优化全部完成
  - ✅ 可变高度 Item 设计（文本3行自适应、图片自适应）
  - ✅ 标签系统替代收藏（数据模型 + UI）
  - ✅ Hover 快捷操作按钮（队列/复制/标签/删除）
  - ✅ 键盘导航系统（↑/↓、Enter、1-9、Esc）
  - ✅ 粘贴队列（购物车模式、批量粘贴）
  - ✅ 抽屉式编辑器（文本编辑、图片预览）
  - ✅ 图片加载修复（使用 convertFileSrc + CSP 配置）
